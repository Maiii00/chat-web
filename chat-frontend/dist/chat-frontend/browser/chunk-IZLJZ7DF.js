import{a as P,b as O,c as k,d as w,e as y,f as S,g as x,h as T}from"./chunk-QVCSQME4.js";import{Da as _,Ea as b,Ga as h,Ha as v,I as l,M as u,V as t,W as r,Z as f,ca as a,fa as g,ga as m,ha as c,ua as C,w as s,ya as M}from"./chunk-277JHPB5.js";var L=class d{username="";password="";http=s(M);router=s(_);ngOnInit(){localStorage.getItem("accessToken")&&this.router.navigate(["/"])}login(){this.http.post(`${v.apiBaseUrl}/users/login`,{username:this.username,password:this.password}).subscribe({next:e=>{localStorage.setItem("accessToken",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken),this.router.navigate(["/"])},error:e=>{console.error("\u767B\u5165\u5931\u6557",e),alert(e?.error?.error||"\u767B\u5165\u5931\u6557\uFF0C\u8ACB\u6AA2\u67E5\u5E33\u5BC6")}})}static \u0275fac=function(i){return new(i||d)};static \u0275cmp=u({type:d,selectors:[["app-login"]],decls:10,vars:2,consts:[[1,"login-container"],[3,"ngSubmit"],["type","text","name","username","placeholder","Username","required","",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","Password","required","",3,"ngModelChange","ngModel"],["type","submit"],["routerLink","/register"]],template:function(i,n){i&1&&(t(0,"div",0)(1,"h2"),a(2,"\u767B\u5165"),r(),t(3,"form",1),f("ngSubmit",function(){return n.login()}),t(4,"input",2),c("ngModelChange",function(o){return m(n.username,o)||(n.username=o),o}),r(),t(5,"input",3),c("ngModelChange",function(o){return m(n.password,o)||(n.password=o),o}),r(),t(6,"button",4),a(7,"\u767B\u5165"),r()(),t(8,"a",5),a(9,"\u672A\u6709\u5E33\u865F?\u8A3B\u518A"),r()()),i&2&&(l(4),g("ngModel",n.username),l(),g("ngModel",n.password))},dependencies:[C,T,S,P,O,k,x,y,w,h,b],styles:[".login-container[_ngcontent-%COMP%]{max-width:400px;margin:10vh auto;padding:2rem;background:#fff;border-radius:12px;box-shadow:0 4px 20px #0000000d;text-align:center}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#333}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ccc;border-radius:8px;font-size:1rem;transition:border-color .2s}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem;background-color:#007bff;color:#fff;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:background-color .2s}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.login-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;margin-top:1rem;color:#007bff;text-decoration:none}.login-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{L as LoginComponent};
